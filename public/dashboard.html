<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard | Auth Portal</title>
    <meta name="description" content="Authenticated dashboard page" />
    <link rel="canonical" href="/dashboard.html" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
      :root{--primary:hsl(262 83% 58%);--fg:hsl(222 47% 11%);--muted:hsl(220 10% 45%);}*{box-sizing:border-box}body{margin:0;font-family:'Inter',system-ui;-webkit-font-smoothing:antialiased;color:var(--fg)}.wrap{min-height:100vh;display:grid;place-items:center;padding:24px;background:linear-gradient(135deg,hsl(262 83% 98%),#fff)}.card{background:#fff;border:1px solid hsl(220 13% 91%);border-radius:16px;padding:28px;max-width:560px;box-shadow:0 10px 30px hsl(262 83% 58% / .15)}h1{margin:0 0 6px}p{margin:0 0 18px;color:var(--muted)}.button{display:inline-flex;align-items:center;gap:10px;padding:12px 16px;border-radius:12px;border:0;background:var(--primary);color:#fff;font-weight:700;cursor:pointer;box-shadow:0 10px 20px hsl(262 83% 58% / .15);transition:transform .08s ease,box-shadow .2s ease}.button:hover{box-shadow:0 16px 30px hsl(262 83% 58% / .25)}.button:active{transform:scale(.98)}
    </style>
  </head>
  <body>
    <main class="wrap">
      <section class="card">
        <h1>Dashboard</h1>
        <p>You are signed in. This is a placeholder page.</p>
        <button id="logout" class="button">Log out</button>
      </section>
    </main>

    <script type="module">
      import { SUPABASE_URL, SUPABASE_ANON_KEY } from './config.js';
      if (!SUPABASE_URL || !SUPABASE_ANON_KEY) {
        // If not configured, allow returning to the login page
        document.getElementById('logout').addEventListener('click', () => {
          window.location.href = '/auth.html#signin';
        });
      } else {
        const { createClient } = await import('https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm');
        const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // Optional: you could check current session here
        try {
          const { data: { session } } = await supabase.auth.getSession();
          if (!session) {
            window.location.replace('/auth.html#signin');
          }
        } catch (e) { console.warn(e); }

        document.getElementById('logout').addEventListener('click', async () => {
          try {
            await supabase.auth.signOut();
          } catch (e) { console.warn(e); }
          window.location.href = '/auth.html#signin';
        });
      }
    </script>
  </body>
</html>
